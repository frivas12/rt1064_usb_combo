#include "./mot_eepromparams.hh"

#include "integer-serialization.hh"

#include <algorithm>

using namespace drivers::apt;

/*****************************************************************************
 * Constants
 *****************************************************************************/

/*****************************************************************************
 * Macros
 *****************************************************************************/

/*****************************************************************************
 * Data Types
 *****************************************************************************/

/*****************************************************************************
 * Private Function Prototypes
 *****************************************************************************/

/*****************************************************************************
 * Static Data
 *****************************************************************************/

/******************************************************************************
 * Interrupt Handlers
 *****************************************************************************/

/*****************************************************************************
 * Public Functions
 *****************************************************************************/

mot_eepromparams::payload_type mot_eepromparams::payload_type::deserialize(
    std::span<const std::byte, APT_SIZE> src) {
    auto ser = little_endian_serializer{};

    payload_type rt;

    std::ranges::copy(src.subspan<0, 2>(), rt.parameters.begin());
    rt.msg_id = ser.deserialize_uint16(src.subspan<2, 2>());

    return rt;
}

/*****************************************************************************
 * Private Functions
 *****************************************************************************/

// EOF
