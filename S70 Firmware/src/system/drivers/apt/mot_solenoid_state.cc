#include "./mot_solenoid_state.hh"

#include "integer-serialization.hh"

using namespace drivers::apt;

/*****************************************************************************
 * Constants
 *****************************************************************************/

/*****************************************************************************
 * Macros
 *****************************************************************************/

/*****************************************************************************
 * Data Types
 *****************************************************************************/

/*****************************************************************************
 * Private Function Prototypes
 *****************************************************************************/

/*****************************************************************************
 * Static Data
 *****************************************************************************/

/******************************************************************************
 * Interrupt Handlers
 *****************************************************************************/

/*****************************************************************************
 * Public Functions
 *****************************************************************************/
mot_solenoid_state::request_type
mot_solenoid_state::request_type::deserialize(uint8_t param1, uint8_t param2) {
    return request_type{
        .channel = param1,
    };
}

mot_solenoid_state::payload_type
mot_solenoid_state::payload_type::deserialize(uint8_t param1, uint8_t param2) {
    return payload_type{
        .solenoid_on = param2 == 0x01,
        .channel = param1,
    };
}

drivers::usb::apt_response::parameters mot_solenoid_state::payload_type::serialize() const {
    return drivers::usb::apt_response::parameters{
        .param1 = static_cast<uint8_t>(channel),
        .param2 = static_cast<uint8_t>(solenoid_on ? 0x01 : 0x02),
    };
}

/*****************************************************************************
 * Private Functions
 *****************************************************************************/

// EOF
