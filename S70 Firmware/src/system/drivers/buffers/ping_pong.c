/**
 * @file fifo.c
 *
 * @brief Functions for ???
 *
 */
#include "../buffers/ping_pong.h"

#include <asf.h>
#include "string.h"

/****************************************************************************
 * Private Data
 ****************************************************************************/

/****************************************************************************
 * Function Prototypes
 ****************************************************************************/

/****************************************************************************
 * Interrupt Handler
 ****************************************************************************/

/****************************************************************************
 * Private Functions
 ****************************************************************************/

/****************************************************************************
 * Public Functions
 ****************************************************************************/
void swap_buffers(fifo_t * f_task, uint8_t * interrupt_buf_sel, uint8_t * task_buf_sel)
{
	irqflags_t flags;

	flags = cpu_irq_save();
	*task_buf_sel = (!*task_buf_sel) & 0x01;
	*interrupt_buf_sel = (!*interrupt_buf_sel) & 0x01;

	// Need to reset the counter for the ISR
//	f_task[*task_buf_sel].head = 0;
//	f_task[*task_buf_sel].tail = 0;

	cpu_irq_restore(flags);
}
